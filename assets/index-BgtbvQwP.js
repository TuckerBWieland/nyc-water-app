import{r as e,o as t,a,c as o,b as s,d as n,e as l,w as r,f as i,g as u,n as d,u as c,t as p,h as m,i as f,j as g,k as y,l as h,F as v,m as b,p as x,q as w,s as k,v as D,x as M,y as C,z as S,A as P,B as N,C as _,D as $,E as O}from"./vue-CpXjhckZ.js";import{r as j,g as L}from"./leaflet-DtqLV9Sc.js";import{C as A,a as T,L as B,B as E,b as I,P as V,p as R,c as q,d as z,e as F,f as U}from"./charts-B2Kdmyyk.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const W=e(!1);function H(){W.value=window.innerWidth<768}const Y={__name:"App",setup:e=>(t(()=>{H(),window.addEventListener("resize",H)}),a(()=>{window.removeEventListener("resize",H)}),(e,t)=>{const a=s("router-view");return n(),o(a)})},Q={};let G;const Z="click_outbound_link";let K=!1;function J(e,t={}){try{if(!K||!G)return;G.capture(e,t)}catch(a){}}const X="/nyc-water-app",ee="2025-08-28";const te=e(!0);"undefined"!=typeof document&&(document.documentElement.classList.toggle("dark",te.value),document.body.classList.toggle("dark",te.value)),r(te,e=>{"undefined"!=typeof document&&(document.documentElement.classList.toggle("dark",e),document.body.classList.toggle("dark",e))});const ae=()=>{te.value=!te.value},oe=i({__name:"ThemeToggleButton",props:{isDarkMode:{type:Boolean,default:!1},sticky:{type:Boolean,default:!0}},setup:e=>(e,t)=>(n(),u("button",{onClick:t[0]||(t[0]=(...e)=>c(ae)&&c(ae)(...e)),class:d(["w-10 h-10 rounded-full shadow-md flex items-center justify-center transition-colors duration-300",[e.sticky?"fixed top-4 right-4 z-50":"",e.isDarkMode?"bg-gray-800 text-white":"bg-white text-gray-800"]])},p(e.isDarkMode?"â˜€ï¸":"ðŸŒ™"),3))}),se={class:"flex-1 flex flex-col"},ne={class:"px-6 py-8 relative"},le={class:"absolute top-4 right-4"},re={class:"flex-1 flex flex-col items-center justify-center px-6 py-12"},ie={class:"max-w-4xl mx-auto text-center space-y-12"},ue={class:"space-y-6"},de={key:0,class:"animate-pulse"},ce={key:1,class:"text-red-500"},pe={class:"text-xl"},me={key:2,class:"space-y-8"},fe={class:"text-5xl md:text-7xl lg:text-8xl font-bold leading-tight tracking-tight"},ge={class:"block text-blue-600 dark:text-blue-400"},ye={class:"text-3xl md:text-4xl lg:text-5xl font-semibold text-red-600 dark:text-red-400"},he={class:"max-w-2xl mx-auto space-y-6"},ve={class:"fixed bottom-[calc(1rem+env(safe-area-inset-bottom,0px))] inset-x-0 flex flex-col items-center px-4 z-[300]"},be=(e,t)=>{const a=e.__vccOpts||e;for(const[o,s]of t)a[o]=s;return a},xe=be(i({__name:"welcome",setup(a){const o=m(),{stats:s,loadYearlyStats:r}=function(){const t=e(!0),a=e(null),o=e([]);return{stats:l(()=>0===o.value.length?{totalSamples:0,unsafeSamples:0,safeSamples:0,loading:t.value,error:a.value}:{totalSamples:o.value.reduce((e,t)=>e+t.totalSites,0),unsafeSamples:o.value.reduce((e,t)=>e+t.cautionSites+t.poorSites,0),safeSamples:o.value.reduce((e,t)=>e+t.goodSites,0),loading:t.value,error:a.value}),loadYearlyStats:async()=>{try{t.value=!0,a.value=null;const e=await fetch("/nyc-water-app/data/dates.json");if(!e.ok)throw new Error("Failed to load dates");const s=(await e.json()).map(async e=>{try{const t=await fetch(`/nyc-water-app/data/${e}/metadata.json`);if(!t.ok)throw new Error(`Failed to load metadata for ${e}`);const a=await t.json();return{date:a.date,totalSites:a.sampleCount||0,goodSites:0,cautionSites:0,poorSites:0,lastUpdated:a.date}}catch(t){return null}}),n=(await Promise.all(s)).filter(e=>null!==e).map(async e=>{try{const t=await fetch(`/nyc-water-app/data/${e.date}/enriched.geojson`);if(!t.ok)throw new Error(`Failed to load GeoJSON for ${e.date}`);const a=await t.json();let o=0,s=0,n=0;return a.features.forEach(e=>{const t=e.properties.mpn;null!=t&&(t<=35?o++:t<=104?s++:n++)}),{...e,goodSites:o,cautionSites:s,poorSites:n}}catch(t){return e}}),l=await Promise.all(n);o.value=l}catch(e){a.value=e instanceof Error?e.message:"Failed to load yearly stats"}finally{t.value=!1}}}}();t(()=>{r()});const i=()=>{o.push(`/${ee}`)};return(e,t)=>(n(),u("div",{class:d(["min-h-screen flex flex-col",c(te)?"bg-gray-900 text-white":"bg-white text-gray-900"])},[f("div",se,[f("header",ne,[f("div",le,[g(oe,{isDarkMode:c(te),sticky:!1},null,8,["isDarkMode"])]),t[0]||(t[0]=f("h1",{class:"text-2xl md:text-2xl font-bold mb-4 tracking-tight text-left"}," NYC Water Quality ",-1))]),f("main",re,[f("div",ie,[f("div",ue,[c(s).loading?(n(),u("div",de,t[1]||(t[1]=[f("div",{class:"h-16 md:h-24 bg-gray-300 rounded mb-4"},null,-1),f("div",{class:"h-16 md:h-24 bg-gray-300 rounded"},null,-1)]))):c(s).error?(n(),u("div",ce,[f("p",pe,"Failed to load data: "+p(c(s).error),1)])):(n(),u("div",me,[f("h2",fe,[t[2]||(t[2]=f("span",{class:"block"},"WE'VE COLLECTED",-1)),f("span",ge,p(c(s).totalSamples.toLocaleString()),1),t[3]||(t[3]=f("span",{class:"block"},"SAMPLES",-1)),t[4]||(t[4]=f("span",{class:"block"},"THIS YEAR",-1))]),f("p",ye,p(c(s).unsafeSamples.toLocaleString())+" have tested unsafe for human contact ",1)]))]),f("div",he,[f("p",{class:d(["text-lg md:text-xl leading-relaxed",c(te)?"text-gray-300":"text-gray-700"])}," This app visualizes water quality data from New York City's waterways, showing bacterial contamination levels at sampling sites across the five boroughs. The data helps residents understand which areas may be unsafe for activities like swimming, kayaking, or fishing. ",2),f("p",{class:d(["text-base md:text-lg leading-relaxed",c(te)?"text-gray-400":"text-gray-600"])}," Samples are categorized as safe (green), caution (yellow), or unsafe (red) based on bacterial levels. Higher bacterial counts typically occur after rainfall when stormwater runoff carries pollutants into waterways. ",2)])])]),t[5]||(t[5]=f("footer",{class:"px-6 py-8 text-center"},null,-1))]),f("div",ve,[f("button",{onClick:i,class:d(["inline-flex items-center px-8 py-4 text-xl font-semibold rounded-lg transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-500/50 shadow-lg hover:shadow-xl",(c(te),"bg-blue-600 hover:bg-blue-700 text-white")])},t[6]||(t[6]=[f("svg",{class:"w-6 h-6 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m0 0L9 7"})],-1),y(" View Latest Map Data ")]),2),f("p",{class:d(["text-sm mt-2",c(te)?"text-gray-400":"text-gray-600"])}," Last update: "+p((new Date).toLocaleDateString()),3)])],2))}}),[["__scopeId","data-v-6a977b42"]]),we={class:"h-screen flex items-center justify-center"},ke={__name:"index",setup(e){const a=m();return t(()=>{a.replace(`/${ee}`)}),(e,t)=>(n(),u("div",we,t[0]||(t[0]=[f("p",null,"If you see this page, the redirect failed.",-1)])))}};const De=L(j()),Me=e(!1),Ce=35,Se=104,Pe=24196,Ne="#22c55e",_e="#facc15",$e="#ef4444";function Oe(e){const t=function(e){if(null===e)return _e;const t=Number(e);return Number.isNaN(t)?_e:t<Ce?Ne:t<=Se?_e:$e}(e);return De.divIcon({html:`\n      <div style="width: 16px; height: 32px; color: ${t}">\n        <svg viewBox="0 0 32 64" xmlns="http://www.w3.org/2000/svg" width="16" height="32">\n          <rect x="8" y="2" width="16" height="6" rx="2" fill="#ccc" stroke="black" stroke-width="0.5"/>\n          <rect x="10" y="8" width="12" height="4" rx="2" fill="#eee" stroke="black" stroke-width="0.5"/>\n          <rect x="6" y="12" width="20" height="44" rx="6" fill="currentColor" stroke="white" stroke-width="1"/>\n          <ellipse cx="16" cy="58" rx="8" ry="2" fill="white" opacity="0.2"/>\n        </svg>\n      </div>\n    `,className:"water-bottle-icon",iconSize:[16,32],iconAnchor:[8,32],popupAnchor:[0,-34]})}function je(e,t){const a=["F","S","S","M","T","W","Th"],o=(e||[]).filter(e=>"number"==typeof e&&!Number.isNaN(e)),s=o.length?Math.max(...o):0;return`\n    <div class="flex items-end justify-between h-16 mb-1">\n      ${e.map((e,o)=>{const n=0===s||null===e?0:e/s*100,l=e&&e>0?Number(e).toFixed(1):"";return`\n            <div class="flex flex-col items-center group h-full justify-end">\n              <div class="text-xs opacity-70 mb-1 font-medium" style="${l?"":"visibility:hidden"}">${l}</div>\n              <div class="w-4 rounded-t transition-all duration-300 shadow-md border border-black/10 min-h-[1px] ${r=e,null==r?t?"bg-gray-500":"bg-gray-300":r<.5?t?"bg-green-600":"bg-green-500":r<3?t?"bg-yellow-500":"bg-yellow-400":t?"bg-red-600":"bg-red-500"}" style="height:${n}%"></div>\n              <span class="text-xs mt-1 font-medium">${a[o%7]}</span>\n            </div>`;var r}).join("")}\n    </div>`}function Le(e){const t=new Date(e),a=t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});return`Sampled on ${t.getMonth()+1}/${t.getDate()} at ${a}`}const Ae=i({__name:"MapViewer",props:{selectedDate:{},isDarkMode:{type:Boolean,default:!1},geojson:{default:null}},setup(o){const s=o,l=e(null),i=e(null),c=e([]),p=e(null),m=e(!1),g=()=>function({map:e,tileLayer:t,markers:a,isDarkMode:o}){if(!e.value)return;t.value&&e.value.removeLayer(t.value);const s=o?"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png":"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png";t.value=De.tileLayer(s,{attribution:"",maxZoom:19,subdomains:"abcd"}).addTo(e.value),function({map:e,markers:t,isDarkMode:a}){e.value&&t.value.forEach(e=>{const t=e.getPopup();if(t){const o=t.getContent();e.closePopup().unbindPopup(),e.bindPopup(o||"",{className:a?"dark-mode-popup":""})}})}({map:e,markers:a,isDarkMode:o})}({map:i,tileLayer:p,markers:c,isDarkMode:s.isDarkMode}),y=e=>function({map:e,markers:t,hasAutoFitted:a,isDarkMode:o,data:s}){if(!e.value)return;const n=e.value.getCenter(),l=e.value.getZoom();for(const i of t.value)i.remove();if(t.value=[],s.features&&0!==s.features.length){for(const a of s.features)try{if(!a.geometry||!a.geometry.coordinates||a.geometry.coordinates.length<2)continue;if(!a.properties)continue;const s=a.properties.siteName||"",n=a.properties.mpn,l=a.properties.timestamp||"";if(void 0===n)continue;const[r,i]=a.geometry.coordinates;if(isNaN(i)||isNaN(r))continue;const u=Oe(n);let d,c;u.options.popupAnchor=[0,-40];const p=Number(n);p<35?(d="text-green-500",c="Acceptable for swimming"):p<=104?(d="text-yellow-400",c="Unacceptable if levels persist"):(d="text-red-500",c="Unacceptable for swimming");const m=e=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),f=m(s),g=m(null===n?"N/A":n.toString()),y=Number(n)===Pe;let h=`\n        <div class="site-popup">\n          <div class="font-semibold text-lg site-name">${f}</div>\n          <div class="mt-2 ${d} font-medium text-base">\n            ${g}${y?"*":""} MPN/100mL\n          </div>\n          <div class="mt-1 text-sm opacity-75">\n            ${c}\n          </div>\n      `;if(y&&(h+='<div class="text-xs opacity-75 mt-1">*Sample reached the instrument detection limit.</div>'),l&&(h+=`<div class="text-xs opacity-75 mt-1">${m(Le(l))}</div>`),(a.properties.tide||void 0!==a.properties.rainfall_mm_7day)&&(h+='<div class="text-xs font-medium mt-3 pt-2 border-t border-gray-200">Environmental Conditions:</div>'),a.properties.tide&&(h+=`<div class="text-xs opacity-75 mt-1"><span title="Tidal data is taken from nearest NOAA station and is only approximate">${m(a.properties.tide)}</span></div>`),void 0!==a.properties.rainfall_mm_7day&&null!==a.properties.rainfall_mm_7day){const e=a.properties.rainfall_mm_7day||0,t=m(Number((.0393701*e).toFixed(2)).toFixed(2));if(W.value){const e=a.properties.rainByDay||[];h+=`<div class="text-xs opacity-75 mt-1">Total rainfall (7-day): ${t} in</div>`,h+='<button class="rain-toggle text-xs underline mt-1">Rain details</button>',h+=`<div class="rain-details hidden mt-1">${je(e,o)}</div>`}else h+=`<div class="text-xs opacity-75 mt-1"><span title="Rainfall data for the 7 days prior to sample date">Rainfall: ${t} in (7-day)</span></div>`}if(void 0!==a.properties.goodCount&&void 0!==a.properties.cautionCount&&void 0!==a.properties.poorCount){const e=m(a.properties.goodCount),t=m(a.properties.cautionCount),o=m(a.properties.poorCount);h+='<div class="text-xs font-medium mt-3 pt-2 border-t border-gray-200">This season:</div>',h+=`<div class="text-xs opacity-75 mt-1">${e} good, ${t} caution, ${o} poor</div>`}h+="</div>";const v=De.marker([i,r],{icon:u}).bindPopup(h,{className:o?"dark-mode-popup":""}).addTo(e.value);v.on("click",()=>{J("click_site_marker",{site_name:s})}),v.on("popupopen",e=>{Me.value=!0;const t=e.popup.getElement(),a=null==t?void 0:t.querySelector(".rain-toggle");a&&a.addEventListener("click",()=>{const e=null==t?void 0:t.querySelector(".rain-details");e&&e.classList.toggle("hidden")})}),v.on("popupclose",()=>{Me.value=!1}),t.value.push(v)}catch(r){}if(t.value.length>0)if(a.value)e.value.setView(n,l);else{const o=De.featureGroup(t.value);e.value.fitBounds(o.getBounds(),{padding:[30,30]}),a.value=!0}}}({map:i,markers:c,hasAutoFitted:m,isDarkMode:s.isDarkMode,data:e});return r(()=>s.isDarkMode,()=>{i.value&&l.value&&g()}),r(()=>s.geojson,e=>{e&&i.value&&y(e)},{immediate:!0}),t(()=>{l.value&&(i.value=De.map(l.value).setView([40.7128,-74.006],12),g(),i.value.removeControl(i.value.zoomControl),s.geojson&&y(s.geojson))}),a(()=>{i.value&&i.value.remove()}),(e,t)=>(n(),u("div",{class:d(["w-full h-full",e.isDarkMode?"bg-gray-800":"bg-white"])},[f("div",{ref_key:"mapContainer",ref:l,class:"absolute inset-0 z-0"},null,512)],2))}}),Te=["F","S","S","M","T","W","Th"],Be={name:"RainDropLegend",props:{selectedDate:{type:String,required:!0},isDarkMode:{type:Boolean,default:!1},rainfallData:{type:Array,default:()=>[]}},setup(e){const t=l(()=>e.rainfallData&&e.rainfallData.length>0?e.rainfallData:[]),a=l(()=>t.value.reduce((e,t)=>e+(t||0),0)),o=l(()=>a.value.toFixed(2)),s=l(()=>t.value.length>0&&t.value.some(e=>null!=e&&e>=0));return{activeRainData:t,totalRainfall:a,totalRainfallValue:o,hasValidRainfallData:s,getBarColorClass:t=>null==t?e.isDarkMode?"bg-gray-500":"bg-gray-300":t<.5?e.isDarkMode?"bg-green-600":"bg-green-500":t<3?e.isDarkMode?"bg-yellow-500":"bg-yellow-400":e.isDarkMode?"bg-red-600":"bg-red-500",getDayLabel:e=>Te[e%7],getBarHeight:e=>{const a=t.value.filter(e=>"number"==typeof e&&!Number.isNaN(e)),o=a.length?Math.max(...a):0;return 0===o?10:0===e?5:Math.max(e/o*100,10)},isMobile:W,featurePopupOpen:Me}}},Ee={class:"flex items-end justify-between h-16 mb-1"},Ie={key:0,class:"text-xs opacity-70 mb-1 font-medium"},Ve=["title"],Re={class:"text-xs mt-1 font-medium"},qe={class:"font-bold"};const ze=be(Be,[["render",function(e,t,a,o,s,l){return o.isMobile&&o.featurePopupOpen||!o.hasValidRainfallData?h("",!0):(n(),u("div",{key:0,class:d(["rain-drop-legend p-3 rounded shadow-md",a.isDarkMode?"bg-gray-800 text-gray-200":"bg-white text-gray-800"])},[t[2]||(t[2]=f("h3",{class:"text-xs font-medium mb-2"},"7-Day Rainfall",-1)),f("div",Ee,[(n(!0),u(v,null,b(o.activeRainData,(e,t)=>(n(),u("div",{key:t,class:"flex flex-col items-center group h-full justify-end"},[e>0?(n(),u("div",Ie,p(e.toFixed(1)),1)):h("",!0),f("div",{class:d(["w-4 md:w-5 rounded-t transition-all duration-300 shadow-md border border-black/10 min-h-[1px]",o.getBarColorClass(e)]),style:x({height:`${o.getBarHeight(e)}%`}),title:`${null!=e?Number(e).toFixed(2):"No data"} inches`},null,14,Ve),f("span",Re,p(o.getDayLabel(t)),1)]))),128))]),f("div",{class:d(["text-xs text-center mt-2 pt-2 border-t",a.isDarkMode?"border-gray-700":"border-gray-200"])},[t[0]||(t[0]=f("span",{class:"font-semibold"},"Total rainfall:",-1)),f("span",qe,p(o.totalRainfallValue),1),t[1]||(t[1]=f("span",null,"in",-1))],2)],2))}],["__scopeId","data-v-71a941d4"]]),Fe={name:"SampleBarLegend",props:{samples:{type:Array,required:!0},isDarkMode:{type:Boolean,default:!1}},setup(e){const t=l(()=>e.samples.filter(e=>Number(e.properties.mpn)<35).length),a=l(()=>e.samples.filter(e=>{const t=Number(e.properties.mpn);return t>=35&&t<=104}).length),o=l(()=>e.samples.filter(e=>Number(e.properties.mpn)>104).length),s=l(()=>e.samples.length),n=l(()=>s.value>0?t.value/s.value*100:0),r=l(()=>s.value>0?a.value/s.value*100:0),i=l(()=>s.value>0?o.value/s.value*100:0);return{greenCount:t,yellowCount:a,redCount:o,totalCount:s,greenPercentage:n,yellowPercentage:r,redPercentage:i,isMobile:W,featurePopupOpen:Me}}},Ue={class:"w-full h-4 rounded-full overflow-hidden flex"},We=["title"],He=["title"],Ye=["title"],Qe={class:"flex justify-between text-xs mt-1"},Ge={class:"flex items-center"},Ze={class:"flex items-center"},Ke={class:"flex items-center"},Je={class:"font-bold"};const Xe=be(Fe,[["render",function(e,t,a,o,s,l){return o.isMobile&&o.featurePopupOpen?h("",!0):(n(),u("div",{key:0,class:d(["sample-bar-legend p-2 rounded shadow-md",a.isDarkMode?"bg-gray-800 text-gray-200":"bg-white text-gray-800"])},[t[4]||(t[4]=f("h3",{class:"text-xs font-medium mb-1"},"Sample Quality",-1)),f("div",Ue,[o.greenCount>0?(n(),u("div",{key:0,class:"h-full bg-green-500 transition-all duration-500 ease-out",style:x({width:`${o.greenPercentage}%`}),title:`${o.greenCount} Good samples`},null,12,We)):h("",!0),o.yellowCount>0?(n(),u("div",{key:1,class:"h-full bg-yellow-400 transition-all duration-500 ease-out",style:x({width:`${o.yellowPercentage}%`}),title:`${o.yellowCount} Moderate samples`},null,12,He)):h("",!0),o.redCount>0?(n(),u("div",{key:2,class:"h-full bg-red-500 transition-all duration-500 ease-out",style:x({width:`${o.redPercentage}%`}),title:`${o.redCount} Poor samples`},null,12,Ye)):h("",!0)]),f("div",Qe,[f("div",Ge,[t[0]||(t[0]=f("span",{class:"inline-block w-2 h-2 bg-green-500 rounded-full mr-1"},null,-1)),f("span",null,p(o.greenCount),1)]),f("div",Ze,[t[1]||(t[1]=f("span",{class:"inline-block w-2 h-2 bg-yellow-400 rounded-full mr-1"},null,-1)),f("span",null,p(o.yellowCount),1)]),f("div",Ke,[t[2]||(t[2]=f("span",{class:"inline-block w-2 h-2 bg-red-500 rounded-full mr-1"},null,-1)),f("span",null,p(o.redCount),1)])]),f("div",{class:d(["text-xs text-center mt-2 pt-2 border-t",a.isDarkMode?"border-gray-700":"border-gray-200"])},[t[3]||(t[3]=f("span",{class:"font-semibold"},"Total sites:",-1)),f("span",Je,p(o.totalCount),1)],2)],2))}],["__scopeId","data-v-b3390d92"]]),et={name:"DateScroller",props:{dates:{type:Array,required:!0},modelValue:{type:String,required:!0},isDarkMode:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const a=m(),o=l(()=>e.dates.indexOf(e.modelValue)),s=l(()=>o.value>0),n=l(()=>o.value<e.dates.length-1),r=l(()=>{if(!e.modelValue)return"";try{const[t,a,o]=e.modelValue.split("-").map(Number);return new Date(Date.UTC(t,a-1,o)).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}catch(t){return e.modelValue}});return{currentIndex:o,hasPrevious:s,hasNext:n,formattedModelValue:r,selectPrevious:()=>{if(s.value){const s=e.dates[o.value-1];t("update:modelValue",s),a.push({path:`/${s}`})}},selectNext:()=>{if(n.value){const s=e.dates[o.value+1];t("update:modelValue",s),a.push({path:`/${s}`})}}}}},tt={class:"fixed bottom-[calc(6rem+env(safe-area-inset-bottom,0px))] left-1/2 transform -translate-x-1/2 z-[320]"},at={class:"px-2 text-center whitespace-nowrap"};const ot=be(et,[["render",function(e,t,a,o,s,l){return n(),u("div",tt,[f("div",{class:d(["inline-flex items-center rounded-full px-6 py-3 shadow-md transition-colors duration-300",a.isDarkMode?"bg-gray-800 bg-opacity-90":"bg-white bg-opacity-90"])},[f("button",{class:d(["w-10 h-10 flex items-center justify-center mr-3 focus:outline-none transition-colors duration-300 text-xl",a.isDarkMode?"text-gray-300 hover:text-white":"text-gray-700 hover:text-black",{"opacity-0 pointer-events-none":!o.hasPrevious}]),"aria-label":"Previous date",onClick:t[0]||(t[0]=e=>o.hasPrevious&&o.selectPrevious())}," â† ",2),f("div",at,[f("span",{class:d(["font-semibold transition-colors duration-300 text-sm sm:text-lg",a.isDarkMode?"text-gray-200":"text-gray-800"])},p(o.formattedModelValue),3)]),f("button",{class:d(["w-10 h-10 flex items-center justify-center ml-3 focus:outline-none transition-colors duration-300 text-xl",a.isDarkMode?"text-gray-300 hover:text-white":"text-gray-700 hover:text-black",{"opacity-0 pointer-events-none":!o.hasNext}]),"aria-label":"Next date",onClick:t[1]||(t[1]=e=>o.hasNext&&o.selectNext())}," â†’ ",2)],2)])}]]),st=e(null),nt=l(()=>null!==st.value);function lt(e,t,a){const{isOpen:o,togglePopup:s,closePopup:n}=function(e){const t=l({get:()=>st.value===e,set:t=>{t?st.value=e:st.value===e&&(st.value=null)}});return{isOpen:t,togglePopup:()=>{t.value=!t.value},closePopup:()=>{st.value===e&&(st.value=null)}}}(e);return{isOpen:o,togglePopup:(e=!0)=>{try{const n=!o.value;s(),n&&e&&(J("open_popup",{component:t}),a&&J(a))}catch(n){s()}},closePopup:n}}const rt={class:"flex justify-between items-center mb-2"},it={class:"font-bold"},ut={__name:"PopupContainer",props:{isOpen:{type:Boolean,required:!0},isDarkMode:{type:Boolean,required:!0},title:{type:String,required:!0}},emits:["close"],setup(t,{emit:o}){const s=t,l=o,i=e(null),c=e=>{i.value&&!i.value.contains(e.target)&&l("close")};return r(()=>s.isOpen,e=>{e?document.addEventListener("click",c):document.removeEventListener("click",c)}),a(()=>{document.removeEventListener("click",c)}),(e,a)=>t.isOpen?(n(),u("div",{key:0,ref_key:"popupRef",ref:i,onClick:a[1]||(a[1]=k(()=>{},["stop"])),class:d(["fixed z-[400] bottom-[calc(4rem+env(safe-area-inset-bottom,0px))] left-1/2 transform -translate-x-1/2","p-4 sm:p-6 rounded-lg shadow-lg","max-h-[calc(100vh-6rem)] overflow-y-auto scrollbar-stable","w-full sm:w-[455px] max-w-[95vw]","transition-colors duration-300",t.isDarkMode?"bg-gray-800 text-white":"bg-white text-black"])},[f("div",rt,[f("h3",it,p(t.title),1),f("button",{class:d(t.isDarkMode?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-700"),onClick:a[0]||(a[0]=t=>e.$emit("close"))}," Ã— ",2)]),f("div",{class:d(["prose text-sm",t.isDarkMode?"text-gray-300":"text-gray-700"])},[w(e.$slots,"default")],2)],2)):h("",!0)}},dt=["title"],ct={class:"font-semibold text-lg pointer-events-none"},pt={__name:"PopupButton",props:{isDarkMode:{type:Boolean,required:!0},icon:{type:String,required:!0},title:{type:String,required:!0},variant:{type:String,default:"default",validator:e=>["default","notification"].includes(e)},showNotification:{type:Boolean,default:!1}},emits:["click"],setup:e=>(t,a)=>(n(),u("button",{class:d(["rounded-full w-10 h-10 flex items-center justify-center shadow-lg transition-colors duration-300 pointer-events-auto touch-action-manipulation","notification"===e.variant&&e.showNotification?"bg-orange-700 text-white hover:bg-orange-800":e.isDarkMode?"bg-gray-800 text-gray-200 hover:bg-gray-700":"bg-white text-gray-800 hover:bg-gray-100"]),style:{pointerEvents:"auto",touchAction:"manipulation"},title:e.title,onClick:a[0]||(a[0]=k(e=>t.$emit("click"),["stop"])),onTouchstart:a[1]||(a[1]=k(e=>t.$emit("click"),["stop","prevent"]))},[f("span",ct,p(e.icon),1)],42,dt))};const mt=be({name:"InfoPopup",components:{PopupContainer:ut,PopupButton:pt},props:{isDarkMode:{type:Boolean,default:!1}},setup(){const{isOpen:e,togglePopup:a}=lt("info","InfoPopup");return t(()=>{try{localStorage.getItem("hasSeenInfoPopup")||(a(!1),localStorage.setItem("hasSeenInfoPopup","true"))}catch(e){}}),{isOpen:e,togglePopup:a}}},[["render",function(e,t,a,o,l,r){const i=s("PopupContainer"),d=s("PopupButton");return n(),u(v,null,[g(i,{isOpen:o.isOpen,isDarkMode:a.isDarkMode,title:"About This Map",onClose:t[0]||(t[0]=e=>o.isOpen=!1)},{default:D(()=>t[1]||(t[1]=[f("p",null," This interactive map displays weekly water quality data collected by community scientists through the NYC Water Quality Monitoring program. ",-1),f("br",null,null,-1),f("p",null," Each dot represents a sampling site across NYC's waterways, color-coded based on the presence of enterococcus bacteriaâ€”an indicator of water safety for recreational activities. ",-1),f("p",{class:"mt-2"},[f("span",{class:"text-green-500 font-medium"},"Green"),y(": < 35 MPN/100mL - Acceptable for swimming ")],-1),f("p",{class:"mt-1"},[f("span",{class:"text-yellow-400 font-medium"},"Yellow"),y(": 35-104 MPN/100mL - Unacceptable if levels persist ")],-1),f("p",{class:"mt-1"},[f("span",{class:"text-red-500 font-medium"},"Red"),y(": > 104 MPN/100mL - Unacceptable for swimming ")],-1),f("p",{class:"mt-4 font-semibold"},"What does MPN mean?",-1),f("p",null," MPN stands for Most Probable Number â€” it's a way of estimating the number of bacteria in a water sample. Higher MPN values suggest more contamination and a higher risk for swimmers. Levels above 104 MPN/100mL are typically considered unsafe for recreational water. ",-1)])),_:1,__:[1]},8,["isOpen","isDarkMode"]),g(d,{isDarkMode:a.isDarkMode,icon:"i",title:"Information",onClick:o.togglePopup},null,8,["isDarkMode","onClick"])],64)}]]),ft={name:"DataInfoPopup",components:{PopupContainer:ut,PopupButton:pt},props:{isDarkMode:{type:Boolean,default:!1},showNotification:{type:Boolean,default:!1}},setup(e){const{isOpen:t,togglePopup:a}=lt("data-info","DataInfoPopup","click_data_info_button");return{isOpen:t,togglePopup:a,trackOutbound:e=>{try{J(Z,{url:e})}catch(t){}},showNotification:M(e,"showNotification")}}},gt={class:"mt-2"};const yt=be(ft,[["render",function(e,t,a,o,l,r){const i=s("PopupContainer"),d=s("PopupButton");return n(),u(v,null,[g(i,{isOpen:o.isOpen,isDarkMode:a.isDarkMode,title:"About the Data",onClose:t[1]||(t[1]=e=>o.isOpen=!1)},{default:D(()=>[t[4]||(t[4]=f("p",{class:"font-semibold mb-2"},"Why heavy rain leads to poor water quality samples:",-1)),t[5]||(t[5]=f("p",null," When it rains heavily, New York City's sewer systemâ€”which combines sewage and stormwater in the same pipesâ€”can become overwhelmed. To prevent backups into homes and streets, this excess mixture is discharged directly into waterways like Newtown Creek and the East River through Combined Sewer Overflows (CSOs). These overflows carry untreated sewage, bacteria, and other pollutants into the water, significantly reducing water quality. That's why samples collected after major rain events often show poor results. ",-1)),t[6]||(t[6]=f("p",{class:"mt-2 font-semibold mb-2"},"Where our rainfall and tide data come from:",-1)),t[7]||(t[7]=f("p",null," Rainfall data is sourced from NOAA's National Weather Service, specifically from the Central Park weather station. This provides a consistent benchmark for citywide precipitation. ",-1)),t[8]||(t[8]=f("br",null,null,-1)),t[9]||(t[9]=f("p",null," Tide data comes from NOAA's tide predictions, using the Battery (NY) tidal station as a reference. Tidal stage helps us understand how water is moving through the estuary, which affects how pollutants disperse. ",-1)),f("p",gt,[t[2]||(t[2]=y(" View the detailed dataset ")),f("a",{href:"https://docs.google.com/spreadsheets/d/12wNiul0QSymg3gO9OdwKkvAms-iHkz2i0hyxl6AP8eQ/edit?gid=0#gid=0",target:"_blank",rel:"noopener",onClick:t[0]||(t[0]=e=>o.trackOutbound("https://docs.google.com/spreadsheets/d/12wNiul0QSymg3gO9OdwKkvAms-iHkz2i0hyxl6AP8eQ/edit?gid=0#gid=0"))},"here"),t[3]||(t[3]=y(". "))])]),_:1,__:[4,5,6,7,8,9]},8,["isOpen","isDarkMode"]),g(d,{isDarkMode:a.isDarkMode,icon:"?",title:"Data information",variant:"notification",showNotification:o.showNotification,onClick:o.togglePopup},null,8,["isDarkMode","showNotification","onClick"])],64)}]]),ht={name:"DonatePopup",components:{PopupContainer:ut,PopupButton:pt},props:{isDarkMode:{type:Boolean,default:!1}},setup(){const{isOpen:e,togglePopup:t}=lt("donate","DonatePopup","click_donate_button");return{isOpen:e,togglePopup:t,trackOutbound:e=>{try{J(Z,{url:e})}catch(t){}}}}},vt={class:"list-disc pl-5"};const bt=be(ht,[["render",function(e,t,a,o,l,r){const i=s("PopupContainer"),d=s("PopupButton");return n(),u(v,null,[g(i,{isOpen:o.isOpen,isDarkMode:a.isDarkMode,title:"Support the Project",onClose:t[2]||(t[2]=e=>o.isOpen=!1)},{default:D(()=>[t[3]||(t[3]=f("p",{class:"mb-2"},"Help expand water quality monitoring by donating or volunteering.",-1)),f("ul",vt,[f("li",null,[f("a",{href:"https://www.billionoysterproject.org/donate",target:"_blank",rel:"noopener",onClick:t[0]||(t[0]=e=>o.trackOutbound("https://www.billionoysterproject.org/donate"))},"Billion Oyster Project")]),f("li",null,[f("a",{href:"https://www.newtowncreekalliance.org/donate/",target:"_blank",rel:"noopener",onClick:t[1]||(t[1]=e=>o.trackOutbound("https://www.newtowncreekalliance.org/donate/"))},"Newtown Creek Alliance")])])]),_:1,__:[3]},8,["isOpen","isDarkMode"]),g(d,{isDarkMode:a.isDarkMode,icon:"$",title:"Donate",onClick:o.togglePopup},null,8,["isDarkMode","onClick"])],64)}]]),xt=i({__name:"TrendsButton",props:{isDarkMode:{type:Boolean,default:!1}},setup(e){const t=m(),a=()=>{t.push("/trends")};return(e,t)=>(n(),u("button",{class:d(["rounded-full w-10 h-10 flex items-center justify-center shadow-lg transition-colors duration-300 pointer-events-auto touch-action-manipulation",e.isDarkMode?"bg-gray-800 text-gray-200 hover:bg-gray-700":"bg-white text-gray-800 hover:bg-gray-100"]),style:{pointerEvents:"auto",touchAction:"manipulation"},"aria-label":"Trends",onClick:a,onTouchstart:k(a,["stop","prevent"])},t[0]||(t[0]=[f("span",{class:"font-semibold text-lg pointer-events-none"},"ðŸ“Š",-1)]),34))}}),wt=i({__name:"HomeButton",props:{isDarkMode:{type:Boolean,default:!1}},setup(e){const t=m(),a=()=>{t.push("/")};return(e,t)=>(n(),u("button",{class:d(["rounded-full w-10 h-10 flex items-center justify-center shadow-lg transition-colors duration-300 pointer-events-auto touch-action-manipulation",e.isDarkMode?"bg-gray-800 text-gray-200 hover:bg-gray-700":"bg-white text-gray-800 hover:bg-gray-100"]),style:{pointerEvents:"auto",touchAction:"manipulation"},"aria-label":"Home",onClick:a,onTouchstart:k(a,["stop","prevent"])},t[0]||(t[0]=[f("span",{class:"font-semibold text-lg pointer-events-none"},"ðŸ ",-1)]),34))}});const kt={key:0},Dt={class:"absolute top-2 left-2 z-10 space-y-2"},Mt={class:"fixed bottom-[calc(1rem+env(safe-area-inset-bottom,0px))] inset-x-0 flex flex-nowrap overflow-x-auto scrollbar-stable justify-center gap-4 px-4 z-[300]"},Ct={key:0,class:"text-lg"},St={key:1,class:"text-red-500"},Pt={class:"text-lg"},Nt={class:"mt-2"},_t={key:2,class:"text-lg"},$t={__name:"[date]",setup(a){const s=C();m();const i=e(s.params.date),y=e([]),{data:v,metadata:b,loading:x,error:w,load:k}=function(t){const a=e(null),o=e(null),s=e(!1),n=e(null);return{data:a,metadata:o,loading:s,error:n,load:async function(e=c(t)){if(!e)return void(n.value="No date provided");n.value=null,s.value=!0;const l=`staticData-${e}`;try{const e="undefined"!=typeof sessionStorage&&sessionStorage.getItem(l);if(e){const t=JSON.parse(e);return a.value=t.geojson,o.value=t.metadata,void(s.value=!1)}}catch(r){}try{const t=`${X}/data/${e}/enriched.geojson`,s=`${X}/data/${e}/metadata.json`,[n,i]=await Promise.all([fetch(t),fetch(s)]);if(!n.ok)throw new Error(`Failed to fetch GeoJSON: ${n.status}`);if(!i.ok)throw new Error(`Failed to fetch metadata: ${i.status}`);const u=await n.json(),d=await i.json();a.value=u,o.value=d;try{"undefined"!=typeof sessionStorage&&sessionStorage.setItem(l,JSON.stringify({geojson:u,metadata:d}))}catch(r){}}catch(r){n.value=r instanceof Error?r.message:"An unknown error occurred",a.value=null,o.value=null}finally{s.value=!1}}}}(i),D=l(()=>{if(!v.value||!Array.isArray(v.value.features))return 0;const e=v.value.features.length;if(0===e)return 0;return v.value.features.filter(e=>Number(e.properties.mpn)>104).length/e*100}),M=l(()=>D.value>50);return t(async()=>{try{const e=X,t=await fetch(`${e}/data/dates.json`);if(t.ok){const e=await t.json();y.value=Array.isArray(e)?e.sort():[]}}catch(e){}await k()}),r(()=>s.params.date,e=>{e&&(i.value=e,k(e))}),(e,t)=>{var a;return n(),u("div",null,[g(oe,{isDarkMode:c(te)},null,8,["isDarkMode"]),c(v)&&c(b)?(n(),u("div",kt,[c(nt)?h("",!0):(n(),o(ot,{key:0,dates:y.value,modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),isDarkMode:c(te)},null,8,["dates","modelValue","isDarkMode"])),f("div",Dt,[g(Xe,{samples:c(v).features,isDarkMode:c(te)},null,8,["samples","isDarkMode"]),g(ze,{selectedDate:i.value,isDarkMode:c(te),rainfallData:(null==(a=c(v).features[0])?void 0:a.properties.rainByDay)||[]},null,8,["selectedDate","isDarkMode","rainfallData"])]),g(Ae,{selectedDate:i.value,isDarkMode:c(te),geojson:c(v)},null,8,["selectedDate","isDarkMode","geojson"]),f("div",Mt,[g(wt,{isDarkMode:c(te)},null,8,["isDarkMode"]),g(mt,{isDarkMode:c(te)},null,8,["isDarkMode"]),g(yt,{isDarkMode:c(te),showNotification:M.value},null,8,["isDarkMode","showNotification"]),g(bt,{isDarkMode:c(te)},null,8,["isDarkMode"]),g(xt,{isDarkMode:c(te)},null,8,["isDarkMode"])])])):(n(),u("div",{key:1,class:d(["text-center h-screen flex items-center justify-center flex-col",c(te)?"bg-gray-800 text-gray-100":"bg-white text-gray-900"])},[c(x)?(n(),u("div",Ct,"Loading water quality data...")):c(w)?(n(),u("div",St,[f("p",Pt,"Error: "+p(c(w)),1),f("p",Nt,"Could not load data for "+p(i.value),1)])):(n(),u("div",_t,"No data available"))],2))])}}},Ot={name:"RainfallSampleTrend",props:{history:{type:Array,required:!0},isDarkMode:{type:Boolean,default:!1}},setup(a){const o=e(null),s=e(null),n=e(null);let i=null;A.register(T,B,E,I,V,R,q,z,F,U);const u=l(()=>{const e=new Map;for(const t of a.history){const a=new Date(t.date+"T00:00:00Z"),o=t.rainfallByDay||[];for(let s=0;s<o.length;s++){const n=new Date(a);n.setUTCDate(n.getUTCDate()-(o.length-1-s));const l=n.toISOString().slice(0,10);e.has(l)||e.set(l,{date:l,rainfall:o[s]||0,sampleSummary:s===o.length-1?t.sampleSummary:null})}}return Array.from(e.values()).sort((e,t)=>e.date.localeCompare(t.date))}),d=()=>{n.value&&(n.value.scrollLeft=n.value.scrollWidth)},c=l(()=>{const e=a.isDarkMode?"#e5e7eb":"#1f2937",t=a.isDarkMode?"rgba(75, 85, 99, 0.3)":"rgba(229, 231, 235, 0.5)";return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index"},animation:{duration:400,easing:"easeInOutCubic"},plugins:{legend:{display:!1},title:{display:!1},tooltip:{callbacks:{label:e=>{const t=u.value[e.dataIndex];if("line"===e.dataset.type)return`Rainfall: ${e.parsed.y} in`;if(!t||!t.sampleSummary)return"";const a=t.sampleSummary.good+t.sampleSummary.caution+t.sampleSummary.unsafe,o=t.sampleSummary[e.dataset.label.toLowerCase()],s=a?Math.round(o/a*100):0;return`${e.dataset.label}: ${o} (${s}%)`},afterBody:e=>{const t=u.value[e[0].dataIndex];if(!t||!t.sampleSummary)return[];return[`Total samples: ${t.sampleSummary.good+t.sampleSummary.caution+t.sampleSummary.unsafe}`]}}}},scales:{ySample:{type:"linear",stacked:!0,position:"left",beginAtZero:!0,max:100,ticks:{color:e},grid:{color:t},title:{display:!0,text:"Sample Quality (%)",color:e,font:{size:10}}},yRain:{type:"linear",position:"right",beginAtZero:!0,ticks:{color:e},grid:{display:!1},title:{display:!0,text:"Rainfall (in)",color:e,font:{size:10}}},x:{ticks:{color:e,maxTicksLimit:12,callback:function(e,t){const a=this.getLabelForValue(e);return 4===new Date(a+"T00:00:00Z").getUTCDay()?a.slice(5):""}},grid:{color:t}}}}});let p=null;const m=(e=100)=>{p&&clearTimeout(p),p=setTimeout(async()=>{await f()},e)},f=async()=>{if(o.value&&0!==a.history.length){i&&(i.destroy(),i=null);try{const e=o.value.getContext("2d"),t=u.value.map(e=>e.date),{rainfall:a,good:s,caution:n,unsafe:l}=(()=>{const e=[],t=[],a=[],o=[];for(const s of u.value)if(e.push(s.rainfall),s.sampleSummary){const e=s.sampleSummary.good+s.sampleSummary.caution+s.sampleSummary.unsafe;t.push(s.sampleSummary.good/e*100),a.push(s.sampleSummary.caution/e*100),o.push(s.sampleSummary.unsafe/e*100)}else t.push(null),a.push(null),o.push(null);return{rainfall:e,good:t,caution:a,unsafe:o}})();i=new A(e,{type:"bar",data:{labels:t,datasets:[{type:"line",label:"Rainfall (in)",data:a,borderColor:"#3b82f6",backgroundColor:"#3b82f6",yAxisID:"yRain",tension:.3},{type:"bar",label:"Good",data:s,backgroundColor:"#16a34a",stack:"samples",yAxisID:"ySample"},{type:"bar",label:"Caution",data:n,backgroundColor:"#eab308",stack:"samples",yAxisID:"ySample"},{type:"bar",label:"Unsafe",data:l,backgroundColor:"#dc2626",stack:"samples",yAxisID:"ySample"}]},options:c.value})}catch(e){}}},g=()=>{i&&i.draw()};return t(async()=>{await S(),await f(),d(),n.value.addEventListener("scroll",g)}),r(()=>a.history,async()=>{m(),d()},{deep:!0}),r(()=>a.isDarkMode,async()=>{m()}),P(()=>{i&&i.destroy(),n.value&&n.value.removeEventListener("scroll",g),p&&clearTimeout(p)}),{chartCanvas:o,axesCanvas:s,scrollContainer:n}}},jt={class:"relative"},Lt={ref:"scrollContainer",class:"p-4 relative overflow-x-auto"},At={class:"min-w-[600px] w-full h-80"},Tt={ref:"chartCanvas",class:"w-full h-full"};const Bt=be(Ot,[["render",function(e,t,a,o,s,l){return n(),u("div",jt,[f("div",Lt,[f("div",At,[f("canvas",Tt,null,512)])],512)])}],["__scopeId","data-v-a141f70d"]]),Et={class:"min-h-screen bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200"},It={class:"max-w-screen-lg mx-auto px-4 pt-14 pb-24 text-center"},Vt={key:0,class:"text-center py-10"},Rt={key:1,class:"overflow-x-auto"},qt={class:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50 flex gap-3"},zt={__name:"trends",setup(a){const o=e([]),l=e(!0);return t(async()=>{try{const e=X,t=await fetch(`${e}/data/dates.json`),a=await t.json()||[],s=(await Promise.all(a.map(async t=>{var a;const o=await fetch(`${e}/data/${t}/enriched.geojson`);if(!o.ok)return null;const s=await o.json(),n={good:0,caution:0,unsafe:0};for(const e of s.features){const t=Number(e.properties.mpn);t<35?n.good++:t<=104?n.caution++:n.unsafe++}return{date:t,rainfallByDay:(null==(a=s.features[0])?void 0:a.properties.rainByDay)||[],sampleSummary:n}}))).filter(Boolean);o.value=s.sort((e,t)=>e.date.localeCompare(t.date))}catch(e){}finally{l.value=!1}}),(e,t)=>{const a=s("router-link");return n(),u("div",Et,[f("div",It,[g(oe,{isDarkMode:c(te)},null,8,["isDarkMode"]),t[2]||(t[2]=f("h1",{class:"text-2xl font-bold mb-6 text-gray-900 dark:text-white"}," Trends: Rainfall vs Water Quality ",-1)),l.value?(n(),u("div",Vt,"Loadingâ€¦")):(n(),u("div",Rt,[g(Bt,{history:o.value,isDarkMode:c(te)},null,8,["history","isDarkMode"])])),t[3]||(t[3]=N('<div class="flex flex-row flex-wrap justify-center gap-4 mt-4 text-xs"><div class="flex items-center gap-1"><span class="w-3 h-3 bg-blue-500 rounded"></span> Rainfall (in)</div><div class="flex items-center gap-1"><span class="w-3 h-3 bg-green-500 rounded"></span> Good (&lt;35)</div><div class="flex items-center gap-1"><span class="w-3 h-3 bg-yellow-400 rounded"></span> Caution (35â€“104)</div><div class="flex items-center gap-1"><span class="w-3 h-3 bg-red-500 rounded"></span> Unsafe (&gt;104)</div></div><p class="text-base text-gray-700 dark:text-gray-300 mt-6 max-w-prose mx-auto"> Each dot in the line shows daily rainfall totals for the past several weeks. Water quality samples are collected on Thursdays, and each stacked bar shows how many samples fell into good, caution, or unsafe zones that day. Since NYCâ€™s sewers overflow during storms, rainfall right before Thursday is the biggest factor in poor water quality. </p>',2)),f("div",qt,[g(a,{to:"/"},{default:D(()=>t[0]||(t[0]=[f("button",{class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-black dark:text-white rounded-full shadow-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"}," ðŸ  Home ",-1)])),_:1,__:[0]}),g(a,{to:"/map"},{default:D(()=>t[1]||(t[1]=[f("button",{class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-black dark:text-white rounded-full shadow-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"}," ðŸ“ Map ",-1)])),_:1,__:[1]})])])])}}},Ft=_({history:$(`${X}/`),routes:[{path:"/",component:xe},{path:"/index",component:ke},{path:"/map",redirect:`/${ee}`},{path:"/:date",component:$t},{path:"/trends",component:zt}]});!async function(){try{const e="phc_w0axXDyN3zCal0qUUsV83NnyCoKsI9AKHXR59aat3tP";if(K)return;const t=await function(e,t){let a=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(null==o?void 0:o.nonce)||(null==o?void 0:o.getAttribute("nonce"));a=e(t.map(e=>{if((e=function(e){return"/nyc-water-app/"+e}(e))in Q)return;Q[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script"),o.crossOrigin="",o.href=e,s&&o.setAttribute("nonce",s),document.head.appendChild(o),t?new Promise((t,a)=>{o.addEventListener("load",t),o.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)})}(()=>import("./analytics-BlUJbZ5Q.js"),[]);G=t.default||t;const a="https://app.posthog.com";G.init(e,{api_host:a,autocapture:!0,debug:!1}),K=!0}catch(e){}}(),Ft.afterEach(()=>{J("$pageview")});const Ut=O(Y);Ut.use(Ft),Ut.mount("#app");
